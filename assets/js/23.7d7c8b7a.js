(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{611:function(a,t,s){"use strict";s.r(t);var e=s(17),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("原文地址："),s("a",{attrs:{href:"http://hscarb.github.io/rabbitmq/20220408-rabbitmq-3.7-install.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://hscarb.github.io/rabbitmq/20220408-rabbitmq-3.7-install.html"),s("OutboundLink")],1)]),a._v(" "),s("h1",{attrs:{id:"rabbitmq-3-7-x-版本-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq-3-7-x-版本-安装"}},[a._v("#")]),a._v(" RabbitMQ 3.7.x 版本 安装")]),a._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#rabbitmq-3-7-x-版本-安装"}},[a._v("RabbitMQ 3.7.x 版本 安装")]),s("ul",[s("li",[s("a",{attrs:{href:"#_1-erlang-22-x-安装"}},[a._v("1. Erlang 22.x 安装")]),s("ul",[s("li",[s("a",{attrs:{href:"#_1-1-deb-安装包安装"}},[a._v("1.1 .deb 安装包安装")])]),s("li",[s("a",{attrs:{href:"#_1-2-apt-安装"}},[a._v("1.2 apt 安装")])])])]),s("li",[s("a",{attrs:{href:"#_2-安装-rabbitmq"}},[a._v("2. 安装 RabbitMQ")])]),s("li",[s("a",{attrs:{href:"#_3-rabbitmq-卸载"}},[a._v("3. RabbitMQ 卸载")])])])])])]),s("p"),a._v(" "),s("p",[a._v("本文讲解 Ubuntu 下 RabbitMQ 3.7 版本的安装。")]),a._v(" "),s("h2",{attrs:{id:"_1-erlang-22-x-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-erlang-22-x-安装"}},[a._v("#")]),a._v(" 1. Erlang 22.x 安装")]),a._v(" "),s("p",[a._v("RabbitMQ 3.7 版本依赖 Erlang 21.3 ~ 22.x 版本。")]),a._v(" "),s("p",[a._v("https://www.rabbitmq.com/which-erlang.html#eol-series")]),a._v(" "),s("p",[a._v("首先需要安装 Erlang。")]),a._v(" "),s("p",[a._v("最简单的 Erlang 安装方法是用 Erlang-Solution 提供的安装包。")]),a._v(" "),s("p",[a._v("https://www.erlang-solutions.com/downloads/")]),a._v(" "),s("h3",{attrs:{id:"_1-1-deb-安装包安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-deb-安装包安装"}},[a._v("#")]),a._v(" 1.1 .deb 安装包安装")]),a._v(" "),s("p",[a._v("进入上述网页，选择 Erlang OTP")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://scarb-images.oss-cn-hangzhou.aliyuncs.com/img/202204072354057.png",alt:""}})]),a._v(" "),s("p",[a._v("在此处选择对应版本的 Erlang 安装包下载，并传到 Ubuntu 服务器目录。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://scarb-images.oss-cn-hangzhou.aliyuncs.com/img/202204072354837.png",alt:""}})]),a._v(" "),s("p",[a._v("随后执行")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("dpkg -i esl-erlang_22.3.4.9-1_ubuntu_focal_amd64.deb\n")])])]),s("p",[a._v("第一次执行会报如下错误")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("Selecting previously unselected package esl-erlang.\n(Reading database ... 148404 files and directories currently installed.)\nPreparing to unpack esl-erlang_22.3.4.9-1_ubuntu_focal_amd64.deb ...\nUnpacking esl-erlang (1:22.3.4.9-1) ...\ndpkg: dependency problems prevent configuration of esl-erlang:\n esl-erlang depends on libncurses5; however:\n  Package libncurses5 is not installed.\n esl-erlang depends on libwxbase2.8-0 | libwxbase3.0-0 | libwxbase3.0-0v5; however:\n  Package libwxbase2.8-0 is not installed.\n  Package libwxbase3.0-0 is not installed.\n  Package libwxbase3.0-0v5 is not installed.\n esl-erlang depends on libwxgtk2.8-0 | libwxgtk3.0-0 | libwxgtk3.0-0v5 | libwxgtk3.0-gtk3-0v5; however:\n  Package libwxgtk2.8-0 is not installed.\n  Package libwxgtk3.0-0 is not installed.\n  Package libwxgtk3.0-0v5 is not installed.\n  Package libwxgtk3.0-gtk3-0v5 is not installed.\n esl-erlang depends on libsctp1; however:\n  Package libsctp1 is not installed.\n\ndpkg: error processing package esl-erlang (--install):\n dependency problems - leaving unconfigured\nErrors were encountered while processing:\n esl-erlang\n")])])]),s("p",[a._v("这是因为缺少一些依赖包，执行如下命令安装。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# sudo apt-get install -f\n\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nCorrecting dependencies... Done\nThe following additional packages will be installed:\n  libncurses5 libsctp1 libtinfo5 libwxbase3.0-0v5 libwxgtk3.0-gtk3-0v5\nSuggested packages:\n  lksctp-tools\nThe following NEW packages will be installed:\n  libncurses5 libsctp1 libtinfo5 libwxbase3.0-0v5 libwxgtk3.0-gtk3-0v5\n0 upgraded, 5 newly installed, 0 to remove and 105 not upgraded.\n1 not fully installed or removed.\nNeed to get 5,521 kB/5,529 kB of archives.\nAfter this operation, 22.2 MB of additional disk space will be used.\nDo you want to continue? [Y/n] Y\n")])])]),s("p",[a._v("选择 Y 后，系统会自动安装依赖包。")]),a._v(" "),s("p",[a._v("随后再执行")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("dpkg -i esl-erlang_22.3.4.9-1_ubuntu_focal_amd64.deb\n")])])]),s("p",[a._v("安装 Erlang")]),a._v(" "),s("h3",{attrs:{id:"_1-2-apt-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-apt-安装"}},[a._v("#")]),a._v(" 1.2 apt 安装")]),a._v(" "),s("p",[a._v("或者可以根据 Erlang-Solution 提供的 Installation using repository 指引进行安装。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://scarb-images.oss-cn-hangzhou.aliyuncs.com/img/202204072359444.png",alt:""}})]),a._v(" "),s("p",[a._v("这里如果是 Ubuntu 20 版本，需要在 "),s("code",[a._v("/etc/apt/sources.list")]),a._v(" 中添加")]),a._v(" "),s("div",{staticClass:"language-list extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("deb https://packages.erlang-solutions.com/ubuntu focal contrib\n")])])]),s("p",[a._v("其中 focal 这些是 Ubuntu 的版本代号。")]),a._v(" "),s("p",[a._v("随后更新 apt 缓存，安装 Erlang。注意此时需要指定安装 Erlang 的版本")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" update\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("erlang")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(":22.3.4.9-1\n")])])]),s("h2",{attrs:{id:"_2-安装-rabbitmq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-rabbitmq"}},[a._v("#")]),a._v(" 2. 安装 RabbitMQ")]),a._v(" "),s("p",[a._v("去 Github 发布页面下载对应的 RabbitMQ 版本的 "),s("code",[a._v(".deb")]),a._v(" 安装包")]),a._v(" "),s("p",[a._v("全部安装包列表")]),a._v(" "),s("p",[a._v("https://github.com/rabbitmq/rabbitmq-server/tags")]),a._v(" "),s("p",[a._v("3.7.27 版本")]),a._v(" "),s("p",[a._v("https://github.com/rabbitmq/rabbitmq-server/releases/tag/v3.7.27")]),a._v(" "),s("p",[a._v("下载后复制到服务器上安装")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# dpkg -i rabbitmq-server_3.7.27-1_all.deb")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Reading database "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("153046")]),a._v(" files and directories currently installed."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nPreparing to unpack "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./rabbitmq-server_3.7.27-1_all.deb "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\nUnpacking rabbitmq-server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.7")]),a._v(".27-1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" over "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.7")]),a._v(".27-1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\ndpkg: dependency problems prevent configuration of rabbitmq-server:\n rabbitmq-server depends on socat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" however:\n  Package socat is not installed.\n")])])]),s("p",[a._v("提示缺少 socat 这个包，于是手动安装")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" socat\n")])])]),s("p",[a._v("随后再次执行")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("dpkg -i rabbitmq-server_3.7.27-1_all.deb\n")])])]),s("p",[a._v("RabbitMQ 被正确安装，运行")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("rabbitmqctl cluster_status\nrabbitmqctl status\n")])])]),s("p",[a._v("查看当前节点状态")]),a._v(" "),s("h2",{attrs:{id:"_3-rabbitmq-卸载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-rabbitmq-卸载"}},[a._v("#")]),a._v(" 3. RabbitMQ 卸载")]),a._v(" "),s("p",[a._v("https://stackoverflow.com/questions/39664283/how-to-remove-rabbitmq-so-i-can-reinstall")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" remove --auto-remove rabbitmq-server\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" purge --auto-remove rabbitmq-server\n")])])]),s("hr"),a._v(" "),s("p",[a._v("欢迎关注公众号【消息中间件】（middleware-mq），更新消息中间件的源码解析和最新动态！")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://scarb-images.oss-cn-hangzhou.aliyuncs.com/img/202205170102971.jpg",alt:""}})])])}),[],!1,null,null,null);t.default=n.exports}}]);